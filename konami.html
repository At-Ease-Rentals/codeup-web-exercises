<!DOCTYPE html>
<html lang = "en">
<head>
  <meta charset = "UTF-8">
  <title>Konami Code</title>
	<link rel = "stylesheet" href = "css/konami.css">
</head>
<body>
    <div class = "page wrapper">
	   <div class="container">
		   <h1>Konami Code</h1>
	      <p>Enter your Konami Code</p>
	   </div>


	    <p id="code"></p>

    </div>

	    <script>

			let keys = {
				37: "left",
				38: "up",
				39: "right",
				40: "down",
				65: "a",
				66: "b"
			};

		let konamiCode = [
				"up", "up", "down", "down", "left", "right", "left", "right", "b", "a"
		]

		document.addEventListener('keydown', checkCode, false);

		let keyCount = 0;

		let codeTimer;


		function checkCode(event) {
			let keyPressed = keys [event.keyCode];
			if (keyPressed === konamiCode[keyCount]) {
				keyCount++;

				window.clearTimeout(codeTimer);

				codeTimer = window.setTimeout(resetKeyState, 1000);

				if (keyCount === konamiCode.length) {
					cheatCodeActivated();
					resetKeyState();
				}
			} else {
					resetKeyState();
				}
		}
;


		function cheatCodeActivated() {
			alert("You have added 30 lives!");
			// let backImage = document.getElementsByTagName('body');
			// body.style.backgroundImage = "url('img/contra.webp')";
	        // let x = document.getElementById('contraSound').duration;
			// document.getElementById('code').innerHTML = x;

		}

		function resetKeyState() {
			console.log("Resetting state");
			keyCount = 0;
			window.clearTimeout(codeTimer);
		}
	</script>
</body>
</html>